
# PRD v0.1 — Project Rewire（配電盤燒線 Demo / Web 版）

## 1. 背景與目標

### 背景
使用者（玩家）對台灣居家水電/弱電實務有高度興趣，特別是「全室抽換線」「迴路規劃」「電流計算」「跳電/燒線」「整理配電箱」的邏輯與儀式感。

### 產品目標（This release）
在 5 分鐘內讓玩家體驗：
1) 選線徑、接線、插電器、送電  
2) 看懂電流計算（P = I × V）  
3) 體驗「過載預警 → 燒線」或「超載 → 跳電」  
4) 透過成本限制產生策略取捨（不能永遠選最粗線）

### 非目標（Not in v0.1）
- 不做全室拉線 / 軟體物理
- 不做相位平衡（紅/黑火線）
- 不做多房間、走管、壁內模式
- 不做弱電/網路（留到後續版本）


## 2. 目標使用者與使用情境

### Persona
- 主要：看過大量水電/弱電影片的 DIY 愛好者、工程師型玩家
- 次要：喜歡整理、配線、模擬器遊戲的玩家（不一定懂水電）

### 使用情境
- 單關遊玩時間 1～3 分鐘
- 失敗後會立刻想重試並更換配置
- 透過失敗原因與數字說明學到電流與線徑概念


## 3. 核心玩法（Core Loop）

1. 選擇 NFB 額定（初版固定 20A）
2. 選擇線材（1.6 / 2.0 / 5.5 mm²）
3. 拖拉接線（NFB → 插座）
4. 拖拉電器到插座（吹風機、快煮壺…）
5. 扳下 NFB 送電
6. 觀察狀態（安培數、線溫、警告 / 跳電 / 燒毀）
7. 成功通電達標 → 結算分數（安全 / 成本）


## 4. 功能需求（Functional Requirements）

### FR-1：材料庫（Parts Tray）
- 顯示可選線材卡片：線徑、最大安全電流、成本/米
- 顯示可用電器卡片：功率、電壓、預估電流
- 顯示 NFB（v0.1 固定 20A）

**驗收條件**
- 玩家可以點選或拖曳線材進行接線
- 玩家可以拖曳電器到插座區


### FR-2：接線系統（Drag & Connect）
- 玩家從線材庫選線後，建立一條迴路：breaker + wire + outlet
- 可視化顯示線路（SVG 或 Canvas 線段）

**驗收條件**
- 未接線時不能送電
- 可替換線材，替換後即時更新成本與模擬參數


### FR-3：負載系統（Plug Loads）
- 每個插座可插入 0～N 個電器（建議上限 2～3）
- 顯示目前插上電器清單與總功率 / 總電流

**驗收條件**
- 插入或移除電器會即時更新總電流
- UI 顯示總電流與狀態顏色


### FR-4：送電與模擬迴圈（Simulation）
- 玩家切換 NFB 開 / 關
- 開啟後每個時間步長 dt 更新：
  - I_total = Σ(P / V)
  - 斷路器跳脫判定
  - 線材熱度 heat 累積與冷卻

**狀態輸出**
- Normal（正常）
- Warning（過載預警）
- Tripped（跳電）
- Burned（燒毀）

**驗收條件**
- 相同配置結果可重現
- 過載約 3 秒會進入燒毀狀態（可調參數）
- 超過 NFB 額定會跳電


### FR-5：視覺與音效回饋（Feedback）
- 線色：白 → 黃 → 黑
- 接點冒煙粒子（可先用簡單動畫）
- 狀態音效（可用 placeholder）
- Fail 視窗顯示原因與建議

**驗收條件**
Fail 視窗至少包含：
- 失敗類型（跳電 / 燒線）
- 關鍵數字（I_total、線材上限、NFB 額定）
- 建議文字


### FR-6：成本與結算（Scoring）
- 成本 = 線長 × 每米單價（v0.1 線長固定 10m）
- 關卡提供預算
- 過關條件：指定電器需正常運作滿 N 秒

**驗收條件**
- 顯示花費與預算差額
- 超預算會失敗或大幅扣分


## 5. 關卡設計（v0.1）

### L01 基礎教學
- 電器：吹風機 1200W / 110V
- 目標：理解 P / V = I

### L02 燒線陷阱
- 電器：吹風機 + 快煮壺
- 目標：1.6mm² 會失敗，較粗線可過

### L03 成本取捨
- 同 L02，但預算收緊
- 目標：避免無腦選最粗線


## 6. 數據表（遊戲用初版數值）

### 線材
- 1.6mm²：15A，成本 3/米
- 2.0mm²：20A，成本 5/米
- 5.5mm²：30A，成本 12/米

### 電器
- 吹風機：1200W / 110V ≈ 10.9A
- 快煮壺：1500W / 110V ≈ 13.6A
- 微波爐：1100W / 110V ≈ 10A

### NFB
- 20A
- 跳脫延遲：約 1.5 秒


## 7. UX / 介面規格

- 上方：關卡目標、預算、花費、狀態燈
- 左側：配電箱與 NFB 開關
- 中央：線路視覺化區域
- 右側：插座與電器區
- 下方：材料庫

錯誤訊息需同時包含數字與建議文字。


## 8. 技術與非功能需求（Web）

### 建議技術
- React + TypeScript
- SVG 或 Canvas 繪圖
- 狀態管理：Zustand 或 Redux
- 模擬迴圈：requestAnimationFrame

### 非功能需求
- 首次載入 < 3 秒
- 模擬結果可重現
- 滑鼠即可完成全部操作


## 9. 成功指標（Success Metrics）

- 多數玩家 5 分鐘內可完成第一關
- 第二關失敗率 > 50%
- 失敗後重試率高


## 10. 後續版本方向（Roadmap Preview）

- v0.2：多迴路、多 NFB
- v0.3：紅黑相位平衡與中性線電流
- v0.4：弱電箱與網路系統模擬
